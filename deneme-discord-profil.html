<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discord Sunucu Simge Üretici</title>
  <style>
    body {
      background-color: #282b30;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    /* Opsiyonel: Sayfada oluşturulan logoyu görsel olarak da göstermek için */
    #serverImage {
      border-radius: 50%;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <!-- Bu div istersen ekrana yazı ile metni de gösterebilir; burada görsel öncelikli -->
  <div id="serverIcon"></div>
  <!-- Canvas gizli olsa da görseli oluşturmak için kullanıyoruz -->
  <canvas id="serverCanvas" width="200" height="200" style="display:none;"></canvas>
  <!-- Oluşturulan resmi göstereceğimiz img etiketi -->
  <img id="serverImage" alt="Sunucu Logosu">
  <script>
    // URL parametrelerini okuyabilmek için
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }
    
    // Sunucu simgesini oluşturup canvas'ta resme dönüştüren fonksiyon
    function generateServerIcon(serverName) {
      if (!serverName) return;
      
      // Artı (+) ve boşluk karakterlerine göre bölüyoruz (regex düzeltildi)
      let words = serverName.split(/[+\s]+/).filter(word => word.trim() !== "");
      
      // Her kelimenin ilk harfini al, büyük harfe çevir ve maksimum 3 harf ile sınırla
      let initials = words.map(word => word.charAt(0).toUpperCase()).slice(0, 3).join("");
      
      // Canvas üzerinde çalışıyoruz
      let canvas = document.getElementById("serverCanvas");
      let ctx = canvas.getContext("2d");
      
      // Rastgele arka plan rengi seçimi (istenirse renk paleti düzenlenebilir)
      let colors = ["#7289DA", "#43B581", "#F04747", "#FAA61A", "#747F8D"];
      let randomColor = colors[Math.floor(Math.random() * colors.length)];
      
      // Canvas üzerine arka planı çiz
      ctx.fillStyle = randomColor;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Logonun üzerine gelecek metni çiziyoruz
      ctx.fillStyle = "white";
      ctx.font = "bold 80px Arial"; // İhtiyaca göre ayarlanabilir
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText(initials, canvas.width / 2, canvas.height / 2);
      
      // Oluşturulan görseli data URL olarak elde ediyoruz
      let imageUrl = canvas.toDataURL("image/png");
      console.log("Oluşturulan Görsel URL'si:", imageUrl);
      
      // <img> etiketi üzerinden görseli ekrana yüklüyoruz
      let imgElement = document.getElementById("serverImage");
      imgElement.src = imageUrl;
      // Discord için genellikle 100x100 boyutu uygun; istersen ayarlayabilirsin
      imgElement.style.width = "100px";
      imgElement.style.height = "100px";
    }
    
    // Sunucu adını URL'den alıyoruz. Örneğin: site.com/?sunucuadi=mc+luner
    let sunucuAdi = getQueryParam("sunucuadi") || prompt("Sunucu adını gir:");
    generateServerIcon(sunucuAdi);
  </script>
</body>
</html>
